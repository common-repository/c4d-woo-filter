var c4dWooFilter={};!function(n){"use strict";c4dWooFilter.options={container:".c4d_woo_filter_products_wrap .products",noproduct:"woocommerce-info",countNumber:".woocommerce-result-count",pagination:".woocommerce-pagination",loadStyle:!1,loadingIcon:'<div class="c4d-woo-filter-loading-icon"><span class="ball"></span></div>',loadMore:{running:!1,text:"Load More",icon:"",end:"All Products Loaded"},beforeActions:[],afterActions:[]},c4dWooFilter.filters={".woocommerce-ordering":{type:"select",action:"submit",dataIndex:".woocommerce-ordering select.c4d-woo-filter-status-active",term:"orderby",bf:function(o,t){n(o).find("select").addClass("c4d-woo-filter-status-active")},buildData:function(){},af:function(o,t){n(o).find("select").removeClass("c4d-woo-filter-status-active")}},".c4d-woo-cpp-form":{type:"select",action:"submit",dataIndex:".c4d-woo-cpp-form select.c4d-woo-filter-status-active",term:"product_perpage",bf:function(o,t){n(o).find("select").addClass("c4d-woo-filter-status-active")},buildData:function(){},af:function(o,t){n(o).find("select").removeClass("c4d-woo-filter-status-active")}},".widget_product_categories li a":{type:"a",action:"click",dataIndex:".widget_product_categories li a.c4d-woo-filter-status-active",term:"",bf:function(o,t){var e=n(o).hasClass("c4d-woo-filter-status-active");n(o).parents(".widget_product_categories").find("a").removeClass("c4d-woo-filter-status-active"),e?n(o).addClass("c4d-woo-filter-status-active"):n(o).removeClass("c4d-woo-filter-status-active")},buildData:function(){},af:function(){}},".widget_price_filter .price_slider_wrapper .price_slider":{type:"form",action:"mouseup",dataIndex:".widget_price_filter form.c4d-woo-filter-status-active",term:"",bf:function(o,t){n(o).parents(".widget_price_filter").find("form").addClass("c4d-woo-filter-status-active")},buildData:function(){},af:function(){}},".widget_layered_nav a":{type:"a",action:"click",dataIndex:".widget_layered_nav a.c4d-woo-filter-status-active",term:"",bf:function(o,t){},buildData:function(o,t){},af:function(o,t){}},".widget_rating_filter a":{type:"a",action:"click",dataIndex:".widget_rating_filter a.c4d-woo-filter-status-active",term:"",bf:function(o,t){},buildData:function(o,t){},af:function(o,t){}},".woocommerce-widget-layered-nav-dropdown a":{type:"form",action:"click",dataIndex:".widget_rating_filter a.c4d-woo-filter-status-active",term:"",bf:function(o,t){},buildData:function(o,t){},af:function(o,t){}},".woocommerce-pagination a":{type:"a",action:"click",dataIndex:".woocommerce-pagination a.c4d-woo-filter-status-active",term:"",bf:function(o,t){},buildData:function(o,t){},af:function(o,t){}},'[class*="c4d-woo-filter-template"] a':{type:"a",action:"click",dataIndex:'[class*="c4d-woo-filter-template"] a.c4d-woo-filter-status-active',term:"",bf:function(o,t){},buildData:function(o,t){},af:function(o,t){0<n(o).parents(".c4d-woo-filter-template-sort").length&&void 0!==c4dWooFilter.datas.orderby&&delete c4dWooFilter.datas.orderby}},".c4d-woo-category a":{type:"a",action:"click",dataIndex:".c4d-woo-category a.c4d-woo-filter-status-active",term:"",bf:function(o,t){var e=n(o).hasClass("c4d-woo-filter-status-active");n(o).parents(".c4d-woo-category").find("a").removeClass("c4d-woo-filter-status-active"),e?n(o).addClass("c4d-woo-filter-status-active"):n(o).removeClass("c4d-woo-filter-status-active")},buildData:function(o,t){},af:function(o,t){}}},c4dWooFilter.currentUrl=!1,c4dWooFilter.filtered={},c4dWooFilter.datas={},c4dWooFilter.checkData=function(o){if("form"==o.type){var t=n(o.dataIndex).serializeArray();n.each(t,function(o,t){c4dWooFilter.datas[t.name]=t.value})}"a"==o.type&&n(o.dataIndex).each(function(o,t){var e=n(t).data("filter-name"),i=n(t).data("min-price"),a=n(t).data("max-price"),c=n(t).data("filter-value");void 0!==e&&(c4dWooFilter.datas[e]=c),void 0!==i&&(c4dWooFilter.datas.min_price=i),void 0!==a&&(c4dWooFilter.datas.max_price=a)}),"input"==o.type&&0<n(o.dataIndex).length&&(c4dWooFilter.datas[o.term]=n(o.dataIndex).html()),"select"==o.type&&0<n(o.dataIndex).length&&(c4dWooFilter.datas[o.term]=n(o.dataIndex).val())},c4dWooFilter.requestResponse=function(o){c4dWooFilter.updateHTML(o)},c4dWooFilter.updateHTML=function(o){var t=n(o).find(c4dWooFilter.options.container).html(),e=n(o).find(c4dWooFilter.options.countNumber),i=n(o).find(c4dWooFilter.options.pagination).html();i=null==i?"":i,t=null==t?'<div class="'+c4dWooFilter.options.noproduct+'">'+n(o).find("."+c4dWooFilter.options.noproduct).html()+"</div>":t,n(c4dWooFilter.options.countNumber).html(e),c4dWooFilter.options.loadMore.running?(n(c4dWooFilter.options.container).append(t),n(c4dWooFilter.options.pagination).html(i),c4dWooFilter.options.loadMore.running=!1):(n(c4dWooFilter.options.container).html(t),n(c4dWooFilter.options.pagination).html(i))},c4dWooFilter.toggleLoadingIcon=function(){var o=n(c4dWooFilter.options.container),t=n(".c4d-woo-filter-loading-icon");o.css("position","relative"),t.length<1&&o.after(c4dWooFilter.options.loadingIcon),n("body").toggleClass("c4d-woo-filter-loading-active")},c4dWooFilter.loadMore=function(){if(n("body").hasClass("c4d-woo-filter-load-more-active")){var o=n(c4dWooFilter.options.pagination),t="";if(t='<div class="c4d-woo-filter-load-more">',t+='<div class="text">'+c4dWooFilter.options.loadMore.text+"</div>",t+='<div class="icon">'+c4dWooFilter.options.loadMore.icon+"</div>",t+='<div class="end">'+c4dWooFilter.options.loadMore.end+"</div>",t+="</div>",o.after(t),n("body").on("click",".c4d-woo-filter-load-more",function(){c4dWooFilter.options.loadMore.running=!0;var e=o.find("li .page-numbers");n.each(e,function(o,t){if(n(t).hasClass("current"))return n(e[o+1]).trigger("click"),n(e[o+3]).length<1&&n(".c4d-woo-filter-load-more").addClass("end-page"),!1})}),n("body").hasClass("c4d-woo-filter-load-more-scroll")){var a=0,c=n(".c4d-woo-filter-load-more");0<c.length&&n(window).scroll(function(o){if(1==c4dWooFilter.options.loadMore.running)return!1;var t=c.offset().top,e=n(this).scrollTop(),i=e+n(window).height();a<e&&t-i<-100&&c.trigger("click"),a=e})}c4dWooFilter.options.afterActions.push("loadMoreButtonStatus")}},c4dWooFilter.loadMoreButtonStatus=function(){var o=n(".c4d-woo-filter-load-more"),t=n(c4dWooFilter.options.pagination);t.find("li:last-child .page-numbers").hasClass("current")||o.removeClass("end-page"),t.find("li").length<1?n(o).addClass("no-products"):n(o).removeClass("no-products")},c4dWooFilter.initFilter=function(){n.each(c4dWooFilter.filters,function(o,a){n("body").on(a.action,o,function(o){var e=n(this);c4dWooFilter.datas={},o.preventDefault(),"a"==a.type&&(e.toggleClass("c4d-woo-filter-status-active"),e.siblings().removeClass("c4d-woo-filter-status-active"),e.parent().siblings().find("a").removeClass("c4d-woo-filter-status-active")),n.each(c4dWooFilter.options.beforeActions,function(o,t){c4dWooFilter[t](this)}),void 0!==a.bf&&a.bf(this,a),c4dWooFilter.toggleLoadingIcon(),n.each(c4dWooFilter.filters,function(o,t){c4dWooFilter.checkData(t)}),void 0!==a.data&&a.buildData(this,a),void 0!==a.af&&a.af(this,a);var t=window.location.href,i=n(this).attr("href");i&&""!=i&&(e.hasClass("c4d-woo-filter-status-active")?c4dWooFilter.currentUrl=i:c4dWooFilter.currentUrl=t),c4dWooFilter.currentUrl&&(t=c4dWooFilter.currentUrl);n.ajax({url:t,method:"GET",data:c4dWooFilter.datas,dataType:"html",beforeSend:function(o){},fail:function(o){c4dWooFilter.requestResponse(o),c4dWooFilter.toggleLoadingIcon()}}).done(function(o){c4dWooFilter.requestResponse(o),c4dWooFilter.toggleLoadingIcon(),n.each(c4dWooFilter.options.afterActions,function(o,t){c4dWooFilter[t](e)}),n("body").hasClass("c4d-woo-filter-load-more-active")||n([document.documentElement,document.body]).animate({scrollTop:n(c4dWooFilter.options.container).offset().top-100},400)});return!1})})},n(document).ready(function(){c4dWooFilter.initFilter(),c4dWooFilter.loadMore()})}(jQuery);